# 6주차 질문리스트

### 1. OSI 7계층에서 링크 계층에 대해 아는대로 설명해주세요.

물리 계층을 바탕으로 인접한 두 장치 간에 데이터를 주고 받을 수 있도록 하는 계층입니다. 이러한 연결을 포인트 투 포인트 연결이라고도 하는데요. MAC 주소를 이용하여 통신하며, 송수신하는 데이터의 오류와 흐름을 관리하는 기능이 있습니다. 데이터링크 계층의 프로토콜은 이더넷이 있으며, 기본 데이터 단위는 프레임입니다.

### 1-1. MAC 주소가 무엇인가요? 그것을 통해 어떻게 통신이 가능하죠?

MAC 주소는 네트워크 인터페이스 카드(NIC)에 할당된 고유한 물리적 주소입니다. 각 네트워크 장치마다 유니크한 MAC 주소를 가지게 됩니다. 

IP 주소만으로는 정확하게 어떤 네트워크 장치로 전달을 해야하는지는 정할 수가 없습니다. 동일한 로컬 네트워크에서 어떤 네트워크 장치로 전송해야하는지 정해야하는데, MAC 주소를 통해 그것을 결정이 가능합니다. 즉, IP는 전체 네트워크에서의 통신을, MAC 주소는 로컬 네트워크에서의 통신을 담당합니다.

데이터링크 계층에서 프레임을 생성해서 다음 행선지로 전달을 해야하는데, 이 때 MAC 프레임의 데이터에 생성한 IP 패킷을 담고, 출발지(자신) MAC 주소, 목적지(게이트웨이 라우터)의 MAC 주소를 채워 새로 생성하게 됩니다. 해당 MAC 주소를 가진 네트워크 장치로 데이터가 전송되게 되고 이 과정이 반복되어 최종 원하는 목적지까지 도달이 가능하게 되는 것입니다.

### 1-2. 프레임이 무엇이고 구조는 어떻게되나요?

MAC 프레임은 데이터 링크 계층에서 사용되는 데이터 단위입니다. 이는 네트워크를 통해 전송되는 데이터를 캡슐화하고, 송신자와 수신자의 정보를 포함합니다.

프레임의 구조는 크게 출발지의 MAC 주소, 목적지의 MAC 주소, 실제 데이터를 담고있는 페이로드 등으로 구성됩니다. MAC 프레임은 상위 계층의 데이터를 캡슐화하여 물리적 네트워크를 통해 전송할 수 있게 해줍니다.

### 1-3. 이더넷이 무엇인지 설명해주세요.

이더넷은 유선 LAN에서 데이터를 주고받기 위한 표준 네트워크 기술입니다. 데이터를 프레임이라는 단위로 감싸서 프레임 내부에 존재하는 MAC 주소를 목적지로 이더넷 케이블을 통해 통신하게 됩니다. CSMA/CD 방식을 통해 충돌을 감지하고 재전송하는 매커니즘을 가지고 있습니다.

### 2. 한 호스트에서 게이트웨이 라우터로 데이터를 전송하고자할 때 MAC 프로토콜이 왜 필요한지, MAC 프로토콜이 어떻게 충돌을 방지하는지 설명해주세요.

한 호스트에서 게이트웨이 라우터로 데이터를 전송하고자할 때, 호스트와 라우터가 1:1로 데이터 전송하는 것이 아니라 실제로는 여러 호스트가 해당 라우터로 데이터 전송을 시도하게되는 동일한 채널을 사용하게 됩니다. 

이 때, 여러 호스트가 동시에 전송을 시도할 경우 충돌이 발생할 수 있는데, 이러면 데이터가 유실되거나하는 문제가 발생할 수 있습니다. 따라서 이러한 충돌을 방지하기 위한 매커니즘이 필요하게 되는데, 이를 MAC 프로토콜이 수행하여 충돌을 방지합니다. 충돌방지 과정은 다음과 같습니다.

**충돌 방지 과정**

1. MAC 프레임 전송하기 전에 먼저 채널을 듣는다.
2. 누군가 전송을 하고 있다면 전송을 잠시 대기시키고, 아무도 전송하고 있지 않다면 프레임을 전송한다.
3. 만약 전송했는데 충돌이 감지될 경우, 재전송한다. (유선 통신은 케이블로 보호받고 있기 때문에 충돌이 감지되지 않을 경우 전송이 제대로 이루어졌다고 판단한다)

### 3. LAN에 대해 설명해주세요.

![image.png](6%E1%84%8C%E1%85%AE%E1%84%8E%E1%85%A1%20%E1%84%8C%E1%85%B5%E1%86%AF%E1%84%86%E1%85%AE%E1%86%AB%E1%84%85%E1%85%B5%E1%84%89%E1%85%B3%E1%84%90%E1%85%B3%20e2cdff2985b34ac0a2e0bb27e44a0d2d/image.png)

라우터를 거치지 않고도 서로 접근/통신이 가능한 호스트들의 집합이라고 할 수 있다. 그 호스트들 간의 연결이 바로 Local Area Network로 이루어져 있다.

### 4. 호스트가 가지고 있는 ARP 테이블이 무엇인지 개념에 대해 아는대로 설명해주세요.

호스트에서 라우터로 데이터를 전송할 때, 데이터 링크 계층에서 전송할 목적지를 결정하려면 MAC 주소가 필요하다. 이 때, 주변 장치들의 IP와 MAC 주소들을 매핑한 정보들을 담은 테이블이 바로 ARP 테이블이다. 호스트는 이 ARP 테이블을 참조하여 목적지의 MAC 주소를 얻게되고 MAC 프레임을 생성할 때 해당 MAC 주소를 함께 담아 목적지로 전송하게 된다.

### 4-1. ARP 테이블은 그럼 누가 어떻게 채우나요?

Self Learning이라는 방식으로 보통 채우게 되는데 호스트 자신이 특정 IP 주소에 대한 MAC 주소를 모를 때 ARP 요청을 브로드캐스트합니다. 그리고 해당 IP 주소를 가진 장치가 ARP 응답을 보내어 자신의 MAC 주소를 전송합니다. 호스트는 응답을 받아 ARP 테이블에 정보를 저장합니다.

### 5. 하나의 LAN에 속한 호스트에서 다른 LAN에 속한 호스트로 메시지를 전송하는 과정에 대해 아는대로 설명해주세요.

1. DHCP 프로토콜을 이용해 게이트웨이 라우터의 IP 주소를 획득한다.
2. 자신의 IP, 목적지의 IP 주소를 가진 IP 패킷을 생성한다.
3. MAC 프레임의 데이터에 생성한 IP 패킷을 담고, 출발지(자신) MAC 주소, 목적지(게이트웨이 라우터)의 MAC 주소를 채워 새로 생성한다.
4. 게이트웨이 라우터로 생성한 MAC 프레임을 전송한다.
5. 게이트웨이 라우터는 포워딩 테이블을 참조하여 다음 행선지를 결정한다.
6. 게이트웨이 라우터는 자신의 ARP 테이블을 참조하여 다음 행선지에 전송할 MAC 프레임을 생성한다.
7. 그 다음 행선지도 라우터라면 위 과정을 반복한다.
8. 원하는 LAN에 도달하고, 최종 호스트에 도달하게된다.

### 6. 스위치가 무엇인지 설명하고 어떤 특징과 장점을 가지고 있는지 설명해주세요.

![image.png](6%E1%84%8C%E1%85%AE%E1%84%8E%E1%85%A1%20%E1%84%8C%E1%85%B5%E1%86%AF%E1%84%86%E1%85%AE%E1%86%AB%E1%84%85%E1%85%B5%E1%84%89%E1%85%B3%E1%84%90%E1%85%B3%20e2cdff2985b34ac0a2e0bb27e44a0d2d/image%201.png)

스위치는 컴퓨터 네트워크에서 데이터 패킷을 전달하는 네트워크 장비입니다. 여러 장치를 연결하고 데이터를 효율적으로 전송하는 역할을 합니다.

**특징**

- MAC 주소 기반 동작: 스위치는 MAC(Media Access Control) 주소를 사용하여 데이터를 전송합니다.
- 포트 기반: 여러 개의 포트를 가지고 있어 다수의 장치를 연결할 수 있습니다.
- 전이중 통신(Full-duplex): 동시에 데이터를 송수신할 수 있습니다.
- 스위칭 테이블: MAC 주소와 포트 정보를 저장하여 효율적인 데이터 전송을 가능하게 합니다.
- 레이어 2 장비: OSI 모델의 데이터 링크 계층에서 작동합니다.

**장점**

- 높은 성능: 각 포트 간 독립적인 대역폭을 제공하여 높은 처리량을 가능하게 합니다.
- 충돌 도메인 분리: 각 포트가 독립적인 충돌 도메인을 형성하여 네트워크 효율성을 높입니다.
- 확장성: 쉽게 포트를 추가하여 네트워크를 확장할 수 있습니다.
- 낮은 지연시간: 빠른 패킷 전송으로 네트워크 지연을 최소화합니다.
- 관리 용이성: 많은 스위치가 네트워크 모니터링 및 관리 기능을 제공합니다.
- 비용 효율성: 허브나 리피터에 비해 효율적이고, 라우터에 비해 저렴합니다.
- 자동 구성: 많은 경우 플러그 앤 플레이 방식으로 쉽게 설치 및 구성이 가능합니다.

### 7. 호스트 수가 늘어날 때, 네트워크를 확장하기위한 두 가지가 무엇인지 말하고, 각각의 장단점에 대해서 말해주세요.

- **스위치를 추가한다.**
    - **장점**
        - 관리나 구성이 덜 복잡하다. (플러그 앤 플러그) 쉽게 설치 가능
        - 비용이 싸다.
        - 라우터를 추가하는 것보다 지연시간이 낮습니다. 추가되는 호스트들도 같은 네트워크로 취급받기 때문.
    - **단점**
        - 브로드캐스트 도메인이 확장되어 네트워크 트래픽이 증가될 수 있습니다.
        - 네트워크 분리가 어려워 보안 관리에 제한이 있을 수 있습니다.
        - 추가되는 호스트들만큼 IP 주소가 추가되기에, IP 주소 관리가 복잡해져 어려워질 수 있습니다.
        - 브로드캐스트 도메인의 크기가 제한이 있을 수 있습니다.
- **라우터를 추가한다.**
    - **장점**
        - 서브넷을 생성해 네트워크를 분리할 수 있어 트래픽을 효과적으로 제어가 가능합니다.
        - 분리된 네트워크 간 보안 정책을 보다 효율적으로 적용할 수 있습니다.
        - 각 서브넷에 대해 별도의 IP 주소를 할당할 수 있어 IP 주소 관리를 효율적으로 할 수 있게됩니다.
        - 라우팅을 통해 보다 효율적인 경로 선택이 가능하게됩니다.
    - **단점**
        - 스위치보다 일반적으로 더 비쌉니다.
        - 구성과 관리가 더 복잡해질 수 있습니다.
        - 패킷의 라우팅 과정에서 약간의 지연이 발생할 수 있습니다.

### 8. 무선 환경에서 호스트들이 AP들과 어떻게 네트워크 통신을 하는지 설명해주세요.

통신 방법은 크게 Passive Scanning과 Active Scanning으로 나눠집니다.

**Passive Scanning**은 AP가 주기적으로 비콘 프레임을 전송하고 호스트들은 그것을 수동적으로 청취하는 방식으로 탐색/접속이 이루어지게 됩니다. 대부분의 무선 네트워크는 이 방식을 사용합니다.

**Active Scanning**은 호스트가 프로브 요청 프레임을 AP에게 능동적으로 보내고, AP는 그 요청에 대해 프로브 응답 프레임으로 답하는 방식으로 탐색/접속이 이루어 집니다. 주로 빠른 네트워크 연결이 필요하거나 숨겨진 네트워크를 찾아야할 때 사용할 수 있습니다.

### 8-1. AP가 무엇인가요?

AP는 Access Point의 약자로 무선 장치들이 유선 네트워크에 연결할 수 있도록 하는 중계 장치입니다. 일반적으로 무선 공유기라고 부르는 장치가 AP의 기능을 포함하고 있습니다. 

종류로는 크게 

단순히 무선 접속만을 제공하는 독립형 AP와

라우터, 스위치 등의 기능이 포함된 통합형 AP가 있습니다.

Wi-Fi 신호(비콘 프레임)를 브로드캐스트하여 무선 기기들이 네트워크에 접속할 수 있도록하며, 유선 네트워크와 무선 네트워크를 연결하는 브릿지 역할을 합니다.

### 8-2. 비콘 프레임이 무엇이죠?

비콘 프레임은 AP가 주기적으로 브로드캐스트하는 작은 데이터 패킷으로 자신의 존재와 무선 네트워크의 가용성을 알립니다. 일반적으로 초당 10회 정도로 전송하며 무선 클라이언트가 이 비콘 프레임을 수신함으로써 네트워크 연결 여부를 결정할 수 있습니다.

### 8-3. 프로브 프레임은 그럼 뭐죠?

프로브 프레임은 무선 네트워크에서 Active Scanning 과정에 사용되는 관리 프레임의 한 종류입니다. 프로브 프레임에는 크게 프로브 요청, 프로브 응답 두 유형이 있습니다. 비콘 프레임과 달리 클라이언트 측에서 먼저 AP를 찾기 위해 프로브 요청을 보내고, 조건에 맞는 AP가 있다면 프로브 응답을 보내서 클라이언트는 받은 프로브 응답들을 확인해서 연결할 네트워크를 선택할 수 있습니다.

비콘 프레임을 기다리지 않고 즉시 네트워크 정보를 얻을 수 있어 빠르게 네트워크를 발견할 수 있다는 장점이 있습니다.

### 9. 유선환경에서의 CSMA/CD 방식으로 왜 무선환경에서 충돌제어를 할 수 없는 설명해주세요.

통신을 원하는 호스트 A, B ,C가 있다고 하자. 유선환경에서는 거리가 어느정도 있더라도 통신의 강도가 동일하게 유지된다. 그래서 A와 C는 서로 데이터를 전송 중인지 아닌지 알 수 있고, 이에 따라 전송 중이면 끝날 때까지 기다렸다가 전송하는 것이 가능하다. 따라서 충돌이 안나도록 사전에 방지할 수가 있다.

하지만 무선환경에서는 공기 중에 수많은 매체나 이물질들이 존재하기 때문에 통신 강도가 거리에 따라 점점 줄어든다는 특징이 있다. 따라서 A와 C가 서로 거리가 멀다면 서로 데이터를 전송 중인지 아닌지 알 수 없게 될 것이다. 이러면 전송 중인지 여부를 미리 파악해서 내가 전송할 지 말지 선택하는 것이 불가능하기 때문에, 이전과 동일한 방식으로 충돌이 안나도록 사전에 방지할 수가 없게되는 것이다.

### 9-1. 그 어려움을 극복하기 위해 무선환경에서는 어떤 방식을 사용하는지 설명해주세요.

기본적으로 데이터를 받는 쪽에서 **ACK**를 전송하는 방식을 사용하게된다. 과정을 자세히 설명하면

1. sender는 정해진 시간(DIFS)이 지난 후에 reciver에게 데이터를 전송한다.
2. reciver는 데이터가 제대로 받아졌다면 정해진 시간(SIFS)이 지난 후 sender에게 ACK를 보낸다.
3. sender는 ACK를 받으면 데이터가 제대로 전송됨을 알고, 다음 데이터 전송을 준비한다.
4. ACK가 안왔다면 ACK가 올때까지 재전송을 한다. (유선환경과 달리 충돌 제어가 안되므로)

### 9-2. 그렇다면 충돌이 날지 안날지 상관없이 데이터 전송을 무작정 시도하게되는 것인가요?

아닙니다. 무선환경에서는 유선환경에 비해 충돌이 날 가능성이 더욱 높기 때문에 추가적인 방식을 사용하게 됩니다. RTS-CTS 방식인데요.

**RTS**는 sender가 정식 데이터 전송을 하기전에 자신이 지금부터 데이터 전송을 하겠다고 주변에 알리는 동작입니다.

**CTS**는 reciver가 sender에게 RTS 신호를 받으면 그 응답으로 데이터 전송을 받을 준비가 되었다고 sender에게 알리는 동작입니다.

RTS와 CTS에는 얼마시간동안 해당 채널을 사용하겠다는 정보다 담겨있습니다.

이 일련의 RTS-CTS 사이클이 이루어진 뒤 정식 데이터 전송이 시작되게되고 정해진 시간동안 다른 호스트들은 전송을 하지 않게됩니다. 이 방식을 통해 충돌을 사전에 방지하는 방식을 무선환경 통신에서는 사용하고 있는 것으로 알고 있습니다.